# ê°œë°œ ì§„í–‰ ìƒí™© - 2025ë…„ 11ì›” 5ì¼

## ğŸ“‹ ì‘ì—… ìš”ì•½
ë“œë˜ê³¤ë³¼ ì¼ê´„ ë°°ì†¡ ì‹œìŠ¤í…œì— ì¶”ê°€ ì„œë¹„ìŠ¤ ì„ íƒ ê¸°ëŠ¥ êµ¬í˜„

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ì¶”ê°€ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ ì„¤ê³„ ë° êµ¬í˜„

#### 1.1 ì¶”ê°€ ì„œë¹„ìŠ¤ í•­ëª© ì •ì˜
ë“œë˜ê³¤ë³¼ ë³´ê´€í•¨ì—ì„œ ì¼ê´„ ë°°ì†¡ ì‹ ì²­ ì‹œ ì„ íƒ ê°€ëŠ¥í•œ ì¶”ê°€ ì„œë¹„ìŠ¤ êµ¬í˜„:

- **Windows 11 Home** (150,000ì›)
  - ì •í’ˆ Windows 11 Home ë¼ì´ì„ ìŠ¤

- **Windows 11 Pro** (220,000ì›)
  - ì •í’ˆ Windows 11 Pro ë¼ì´ì„ ìŠ¤ (ì—…ë¬´ìš©)

- **Windows ì„¤ì¹˜** (20,000ì›)
  - ì •í’ˆí‚¤ ì—†ì´ Windows ì„¤ì¹˜ë§Œ

- **ì¡°ë¦½ ê³µì„ë¹„** (50,000ì›)
  - ì „ë¬¸ê°€ ì¡°ë¦½ + 24ì‹œê°„ ì•ˆì •í™” í…ŒìŠ¤íŠ¸

#### 1.2 ë°ì´í„° ëª¨ë¸ ì—…ë°ì´íŠ¸

**ìˆ˜ì •ëœ íŒŒì¼:**
- `lib/core/models/batch_shipment_model.dart`
- `lib/features/dragon_ball/domain/entities/batch_shipment_entity.dart`

**ì¶”ê°€ëœ í•„ë“œ:**
```dart
final List<String> additionalServices;  // ì„ íƒëœ ì„œë¹„ìŠ¤ ëª©ë¡
final int additionalServicesCost;        // ì¶”ê°€ ì„œë¹„ìŠ¤ ì´ ë¹„ìš©
```

**ì—…ë°ì´íŠ¸ëœ ë©”ì„œë“œ:**
- `toMap()` - Firestore ì €ì¥ìš©
- `fromFirestore()` - Firestore ë¬¸ì„œ íŒŒì‹±
- `fromMap()` - Map ë°ì´í„° íŒŒì‹±
- `copyWith()` - ë¶ˆë³€ ê°ì²´ ë³µì‚¬

### 2. ìƒíƒœ ê´€ë¦¬ (Riverpod Providers)

**íŒŒì¼:** `lib/features/dragon_ball/presentation/providers/dragon_ball_provider.dart`

#### 2.1 ì¶”ê°€ëœ Providerë“¤

```dart
// Enum ì •ì˜
enum AdditionalService {
  windowsHome, windowsPro, windowsInstallOnly, assembly
}

// ìƒíƒœ ê´€ë¦¬
final selectedAdditionalServicesProvider = StateProvider<Set<AdditionalService>>

// ê³„ì‚°ëœ ê°’
final selectedServicesCostProvider = Provider<int>

// ì•¡ì…˜
final toggleAdditionalServiceProvider = Provider<void Function(AdditionalService)>
```

#### 2.2 ì„ íƒ ì´ˆê¸°í™” ë¡œì§ ê°œì„ 
ë°°ì†¡ ìš”ì²­ ì™„ë£Œ í›„ ë“œë˜ê³¤ë³¼ ì„ íƒê³¼ ì¶”ê°€ ì„œë¹„ìŠ¤ ì„ íƒ ëª¨ë‘ ì´ˆ  ê¸°í™”ë˜ë„ë¡ ìˆ˜ì •

### 3. UI êµ¬í˜„

**íŒŒì¼:** `lib/features/dragon_ball/presentation/screens/dragon_ball_storage_screen.dart`

#### 3.1 ì¶”ê°€ ì„œë¹„ìŠ¤ ì„¹ì…˜ (_AdditionalServicesSection)
- ì¹´í…Œê³ ë¦¬ë³„ ì„œë¹„ìŠ¤ í‘œì‹œ (Windows, ì¡°ë¦½)
- ì²´í¬ë°•ìŠ¤ë¥¼ í†µí•œ ë‹¤ì¤‘ ì„ íƒ ì§€ì›
- ì„ íƒëœ ì„œë¹„ìŠ¤ì˜ ì´ ë¹„ìš© ë°°ì§€ í‘œì‹œ
- ì „ì²´ í–‰ í´ë¦­ìœ¼ë¡œ í† ê¸€ ê°€ëŠ¥

**UI êµ¬ì„±:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¶”ê°€ ì„œë¹„ìŠ¤ (+ë¹„ìš©)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Windows                             â”‚
â”‚ â˜‘ Windows 11 Home       150,000ì›  â”‚
â”‚ â˜ Windows 11 Pro        220,000ì›  â”‚
â”‚ â˜ Windows ì„¤ì¹˜            20,000ì›  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì¡°ë¦½                                â”‚
â”‚ â˜ ì¡°ë¦½ ê³µì„ë¹„             50,000ì›  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2 í•˜ë‹¨ ì•¡ì…˜ ë°” ì—…ë°ì´íŠ¸ (_BottomActionBar)
- ë°°ì†¡ë¹„ì™€ ì¶”ê°€ ì„œë¹„ìŠ¤ ë¹„ìš©ì„ ë³„ë„ í‘œì‹œ
- ì´ ê¸ˆì•¡ = ë°°ì†¡ë¹„ + ì¶”ê°€ ì„œë¹„ìŠ¤ ë¹„ìš©
- í‘œì‹œ í˜•ì‹: "ë°°ì†¡ë¹„: Xì› +Yì›"

**ì˜ˆì‹œ:**
```
ì„ íƒí•œ ë¶€í’ˆ 2ê°œ
ë°°ì†¡ë¹„: 10,000ì› +150,000ì›
13,000ì› ì ˆì•½!
[160,000ì› ë°°ì†¡ ìš”ì²­]
```

### 4. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í†µí•©

#### 4.1 UseCase ì—…ë°ì´íŠ¸
**íŒŒì¼:** `lib/features/dragon_ball/domain/usecases/create_batch_shipment_usecase.dart`

ì¶”ê°€ëœ íŒŒë¼ë¯¸í„°:
```dart
List<String> additionalServices = const []
int additionalServicesCost = 0
```

#### 4.2 Repository ì—…ë°ì´íŠ¸
**íŒŒì¼:**
- `lib/features/dragon_ball/domain/repositories/batch_shipment_repository.dart`
- `lib/features/dragon_ball/data/repositories/batch_shipment_repository_impl.dart`

`createBatchShipment()` ë©”ì„œë“œì— ì¶”ê°€ ì„œë¹„ìŠ¤ íŒŒë¼ë¯¸í„° í¬í•¨

#### 4.3 í™”ë©´ ê°„ ë°ì´í„° ì „ë‹¬
**íŒŒì¼:** `lib/features/dragon_ball/presentation/screens/batch_shipment_request_screen.dart`

- ì¶”ê°€ ì„œë¹„ìŠ¤ ì •ë³´ë¥¼ ìƒì„±ì íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ
- ë°°ì†¡ ìš”ì²­ ì œì¶œ ì‹œ UseCaseë¡œ ì „ë‹¬

### 5. ë„¤ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸

**ë³€ê²½ ì „:**
```dart
Navigator.pushNamed(context, Routes.batchShipmentRequest, arguments: selectedIds)
```

**ë³€ê²½ í›„:**
```dart
Navigator.push(
  context,
  MaterialPageRoute(
    builder: (context) => BatchShipmentRequestScreen(
      dragonBallIds: selectedIds.toList(),
      additionalServices: selectedServices.map((s) => s.name).toList(),
      additionalServicesCost: servicesCost,
    ),
  ),
)
```

---

## ğŸ“Š ë°ì´í„° íë¦„

```
1. ì‚¬ìš©ì ì•¡ì…˜
   â””â”€> ë“œë˜ê³¤ë³¼ ì„ íƒ + ì¶”ê°€ ì„œë¹„ìŠ¤ ì„ íƒ

2. UI ìƒíƒœ
   â””â”€> selectedDragonBallIdsProvider
   â””â”€> selectedAdditionalServicesProvider
   â””â”€> selectedServicesCostProvider (ê³„ì‚°ë¨)

3. ë°°ì†¡ ìš”ì²­ ë²„íŠ¼ í´ë¦­
   â””â”€> BatchShipmentRequestScreen ì´ë™
       â””â”€> ì„ íƒëœ ì •ë³´ ì „ë‹¬

4. ë°°ì†¡ ì •ë³´ ì…ë ¥ í›„ ì œì¶œ
   â””â”€> CreateBatchShipmentUseCase í˜¸ì¶œ
       â””â”€> BatchShipmentRepository
           â””â”€> Firestoreì— ì €ì¥
               â”œâ”€ dragonBallIds
               â”œâ”€ additionalServices
               â”œâ”€ additionalServicesCost
               â””â”€ shippingCost

5. ì™„ë£Œ í›„ ì •ë¦¬
   â””â”€> ë“œë˜ê³¤ë³¼ ì„ íƒ ì´ˆê¸°í™”
   â””â”€> ì¶”ê°€ ì„œë¹„ìŠ¤ ì„ íƒ ì´ˆê¸°í™”
```

---

## ğŸ—„ï¸ Firestore ë°ì´í„° êµ¬ì¡°

### batchShipments ì»¬ë ‰ì…˜
```javascript
{
  "batchShipmentId": "uuid-v4",
  "userId": "user-id",
  "dragonBallIds": ["db-id-1", "db-id-2"],
  "recipientName": "í™ê¸¸ë™",
  "shippingAddress": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬...",
  "phoneNumber": "010-1234-5678",
  "shippingCost": 10000,
  "additionalServices": ["windowsHome", "assembly"],  // ìƒˆë¡œ ì¶”ê°€
  "additionalServicesCost": 200000,                    // ìƒˆë¡œ ì¶”ê°€
  "status": "pending",
  "requestedAt": Timestamp,
  "shippedAt": null,
  "deliveredAt": null,
  "trackingNumber": null,
  "courier": null
}
```

---

## ğŸ› í•´ê²°ëœ ì´ìŠˆ

### 1. Import ëˆ„ë½ ì˜¤ë¥˜
**ì˜¤ë¥˜:**
```
The method 'BatchShipmentRequestScreen' isn't defined for the type 'DragonBallStorageScreen'
```

**í•´ê²°:**
`dragon_ball_storage_screen.dart`ì— import ì¶”ê°€:
```dart
import 'package:pi_com/features/dragon_ball/presentation/screens/batch_shipment_request_screen.dart';
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸°ë³¸ í”Œë¡œìš°
1. âœ… ë“œë˜ê³¤ë³¼ ë³´ê´€í•¨ì—ì„œ ë¶€í’ˆ 2ê°œ ì„ íƒ
2. âœ… Windows 11 Home (150,000ì›) ì„ íƒ
3. âœ… ì¡°ë¦½ ê³µì„ë¹„ (50,000ì›) ì„ íƒ
4. âœ… í•˜ë‹¨ ë°”ì— "ë°°ì†¡ë¹„: 10,000ì› +200,000ì›" í‘œì‹œ í™•ì¸
5. âœ… "210,000ì› ë°°ì†¡ ìš”ì²­" ë²„íŠ¼ í´ë¦­
6. âœ… ë°°ì†¡ ì •ë³´ ì…ë ¥ í™”ë©´ìœ¼ë¡œ ì´ë™
7. âœ… ë°°ì†¡ ì •ë³´ ì…ë ¥ í›„ ì œì¶œ
8. âœ… Firestoreì— additionalServices, additionalServicesCost ì €ì¥ í™•ì¸
9. âœ… ì œì¶œ í›„ ì„ íƒ ì´ˆê¸°í™” í™•ì¸

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì¶”ê°€ ì„œë¹„ìŠ¤ ì—†ì´ ë°°ì†¡
1. âœ… ë“œë˜ê³¤ë³¼ë§Œ ì„ íƒ (ì¶”ê°€ ì„œë¹„ìŠ¤ ì„ íƒ ì•ˆ í•¨)
2. âœ… ë°°ì†¡ ìš”ì²­ ì‹œ additionalServices: [], additionalServicesCost: 0
3. âœ… ì •ìƒ ì²˜ë¦¬ í™•ì¸

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì„œë¹„ìŠ¤ ì„ íƒ/í•´ì œ ë°˜ë³µ
1. âœ… ì„œë¹„ìŠ¤ ì„ íƒ â†’ ë¹„ìš© ì¦ê°€ í™•ì¸
2. âœ… ì„œë¹„ìŠ¤ ì„ íƒ í•´ì œ â†’ ë¹„ìš© ê°ì†Œ í™•ì¸
3. âœ… ëª¨ë“  ì„œë¹„ìŠ¤ ì„ íƒ â†’ ì´ ë¹„ìš© 440,000ì› í™•ì¸

---

## ğŸ“ ì½”ë“œ í’ˆì§ˆ

### ê°œì„  ì‚¬í•­
- âœ… Clean Architecture íŒ¨í„´ ìœ ì§€
- âœ… Domain Entityì™€ Data Model ë¶„ë¦¬
- âœ… Provider ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬
- âœ… íƒ€ì… ì•ˆì „ì„± (Enum ì‚¬ìš©)
- âœ… ë¶ˆë³€ ê°ì²´ íŒ¨í„´ (copyWith)
- âœ… ê³„ì‚°ëœ ê°’ Providerë¡œ ë¶„ë¦¬

### ì½”ë“œ ë©”íŠ¸ë¦­
- ìˆ˜ì •ëœ íŒŒì¼: 9ê°œ
- ì¶”ê°€ëœ ì½”ë“œ ë¼ì¸: ~300 lines
- ìƒˆë¡œìš´ Provider: 4ê°œ
- ìƒˆë¡œìš´ Enum: 1ê°œ

---

## ğŸ¯ í–¥í›„ ì‘ì—… ì œì•ˆ

### ìš°ì„ ìˆœìœ„: ë†’ìŒ
- [ ] ì¼ê´„ ë°°ì†¡ ìš”ì²­ ë‚´ì—­ í™”ë©´ì—ì„œ ì¶”ê°€ ì„œë¹„ìŠ¤ ì •ë³´ í‘œì‹œ
- [ ] ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ì¶”ê°€ ì„œë¹„ìŠ¤ ì£¼ë¬¸ í™•ì¸ UI

### ìš°ì„ ìˆœìœ„: ì¤‘ê°„
- [ ] ì¶”ê°€ ì„œë¹„ìŠ¤ í• ì¸/í”„ë¡œëª¨ì…˜ ê¸°ëŠ¥
- [ ] ì¶”ê°€ ì„œë¹„ìŠ¤ ì¬ê³  ê´€ë¦¬

### ìš°ì„ ìˆœìœ„: ë‚®ìŒ
- [ ] ì¶”ê°€ ì„œë¹„ìŠ¤ ìƒì„¸ ì„¤ëª… ëª¨ë‹¬
- [ ] ì„œë¹„ìŠ¤ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜

---

## ğŸ’¡ ê¸°ìˆ ì  ê³ ë ¤ì‚¬í•­

### í™•ì¥ì„±
í˜„ì¬ êµ¬ì¡°ëŠ” ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì¶”ê°€ê°€ ìš©ì´í•¨:
1. `AdditionalService` enumì— í•­ëª© ì¶”ê°€
2. `_AdditionalServicesSection`ì— UI ì¶”ê°€
3. ë°ì´í„° ëª¨ë¸ ë³€ê²½ ë¶ˆí•„ìš” (List<String>ìœ¼ë¡œ ì €ì¥)

### ì„±ëŠ¥
- Provider ê¸°ë°˜ ë°˜ì‘í˜• UIë¡œ ìµœì†Œí•œì˜ ë¦¬ë¹Œë“œ
- ê³„ì‚°ëœ ê°’ì€ ìºì‹±ë˜ì–´ ì¬ê³„ì‚° ìµœì†Œí™”

### ìœ ì§€ë³´ìˆ˜
- ì„œë¹„ìŠ¤ ê°€ê²© ë³€ê²½ ì‹œ enum í•œ ê³³ë§Œ ìˆ˜ì •
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ë¶„ë¦¬ë¡œ í…ŒìŠ¤íŠ¸ ìš©ì´

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

### ê´€ë ¨ íŒŒì¼ ìœ„ì¹˜
```
lib/
â”œâ”€â”€ core/
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ batch_shipment_model.dart
â”œâ”€â”€ features/
â”‚   â””â”€â”€ dragon_ball/
â”‚       â”œâ”€â”€ domain/
â”‚       â”‚   â”œâ”€â”€ entities/
â”‚       â”‚   â”‚   â””â”€â”€ batch_shipment_entity.dart
â”‚       â”‚   â”œâ”€â”€ repositories/
â”‚       â”‚   â”‚   â””â”€â”€ batch_shipment_repository.dart
â”‚       â”‚   â””â”€â”€ usecases/
â”‚       â”‚       â””â”€â”€ create_batch_shipment_usecase.dart
â”‚       â”œâ”€â”€ data/
â”‚       â”‚   â””â”€â”€ repositories/
â”‚       â”‚       â””â”€â”€ batch_shipment_repository_impl.dart
â”‚       â””â”€â”€ presentation/
â”‚           â”œâ”€â”€ providers/
â”‚           â”‚   â””â”€â”€ dragon_ball_provider.dart
â”‚           â””â”€â”€ screens/
â”‚               â”œâ”€â”€ dragon_ball_storage_screen.dart
â”‚               â””â”€â”€ batch_shipment_request_screen.dart
```

---

## âœ¨ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ì¶”ê°€ ì„œë¹„ìŠ¤ Enum ì •ì˜
- [x] ë°ì´í„° ëª¨ë¸ ì—…ë°ì´íŠ¸
- [x] Provider ìƒíƒœ ê´€ë¦¬ êµ¬í˜„
- [x] UI ì»´í¬ë„ŒíŠ¸ êµ¬í˜„
- [x] ì²´í¬ë°•ìŠ¤ ì„ íƒ ê¸°ëŠ¥
- [x] ë¹„ìš© ê³„ì‚° ë¡œì§
- [x] UseCase í†µí•©
- [x] Repository í†µí•©
- [x] ë„¤ë¹„ê²Œì´ì…˜ ì—…ë°ì´íŠ¸
- [x] ì„ íƒ ì´ˆê¸°í™” ë¡œì§
- [x] Import ì˜¤ë¥˜ ìˆ˜ì •
- [x] ë¹Œë“œ ì„±ê³µ í™•ì¸
- [x] ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

---

**ì‘ì„±ì¼:** 2025ë…„ 11ì›” 5ì¼
**ì‘ì„±ì:** Claude Code
**í”„ë¡œì íŠ¸:** PI_COM - ë“œë˜ê³¤ë³¼ ì‹œìŠ¤í…œ
